{
	"camera" : 
	{
		"center" : "0.000 0.000 -1.000",
		"eye" : "0.000 0.000 0.000",
		"up" : "0.000 1.000 0.000"
	},
	"general" : 
	{
		"ambientcolor" : "0.300 0.300 0.300",
		"bloom" : true,
		"bloomstrength" : 
		{
			"user" : "bloom",
			"value" : 0.0
		},
		"bloomthreshold" : 0.69999998807907104,
		"camerafade" : false,
		"cameraparallax" : false,
		"cameraparallaxamount" : 0.5,
		"cameraparallaxdelay" : 0.10000000149011612,
		"cameraparallaxmouseinfluence" : 1.0,
		"camerapreview" : false,
		"camerashake" : false,
		"camerashakeamplitude" : 0.5,
		"camerashakeroughness" : 1.0,
		"camerashakespeed" : 3.0,
		"clearcolor" : "0.700 0.700 0.700",
		"clearenabled" : true,
		"farz" : 10000.0,
		"fov" : 50.0,
		"nearz" : 0.0099999997764825821,
		"orthogonalprojection" : 
		{
			"height" : 2160,
			"width" : 3840
		},
		"skylightcolor" : "0.300 0.300 0.300"
	},
	"objects" : 
	[
		{
			"angles" : "0.000 0.000 0.000",
			"colorBlendMode" : 0,
			"copybackground" : true,
			"id" : 13,
			"image" : "models/empty.json",
			"ledsource" : false,
			"locktransforms" : true,
			"name" : "Sounds (script)",
			"origin" : "1920.000 1080.000 0.000",
			"parallaxDepth" : "1.000 1.000",
			"perspective" : false,
			"scale" : "1.000 1.000 1.000",
			"size" : "512.000 512.000",
			"solid" : true,
			"visible" : 
			{
				"script" : "'use strict';\n\nlet a_TitleMusicOld = engine.registerAsset(\"sounds/menu.ogg\");\nlet a_TitleMusic = engine.registerAsset(\"sounds/muTitle.ogg\");\nlet a_TitleAmbient = engine.registerAsset(\"sounds/title-ambient.ogg\");\nlet music = undefined;\n\nconst musicRepeatDelayOld = 37.0;\nconst musicRepeatDelay = 36.25;\nlet repeatDelay = 1;\nlet repeatTimer = 0;\n\nlet activeAudio = [];\n\n\n\n\nclass SoundLayer {\n\tconstructor(asset){\n\t\tthis.asset = asset;\n\t\tthis._layer = thisScene.createLayer(asset);\n\t\tthis._layer.volume = 0.5;\n\t\tthis._layer.playbackmode = \"single\";\n\t\tthis._layer.pause();\n\t\tthis.repeatTimer = 0;\n\n\t\t// Make wrapped layer's properties and methods accessible (using methods on 'this' seems to cause a crash)\n\t\tlet layerKeys = Object.keys(this._layer);\n\t\tfor (let i = 0; i < layerKeys.length; ++i) {\n\t\t\tthis[layerKeys[i]] = this._layer[layerKeys[i]];\n\t\t}\n\t}\n\n\tupdate() {\n\n\t\t// Fade out then kill layer\n\t\tif (this.fadeOut) {\n\t\t\tthis.fadeTimer += engine.frametime;\n\t\t\tif (this.fadeTimer > SoundLayer.fadeTime) {\n\t\t\t\tthis.destroy();\n\t\t\t}\n\t\t\telse {\n\t\t\t\tthis._layer.volume = 0.5 * (1 - (this.fadeTimer / SoundLayer.fadeTime));\n\t\t\t}\n\t\t}\n\t\t// Delayed start to prevent audio hiccups\n\t\telse if (!this._layer.isPlaying()) {\n\t\t\tthis._layer.play();\n\t\t}\n\t\t// Fade out and repeat when music ends\n\t\telse {\n\t\t\tthis.repeatTimer += engine.frametime;\n\n\t\t\t// Start new audio\n\t\t\tif (this.repeatTimer > this.repeatDelay) {\n\t\t\t\tthis.startFade();\n\t\t\t\tlet newLayer = new SoundLayer(this.asset);\n\t\t\t\tnewLayer.repeatDelay = this.repeatDelay;\n\t\t\t\tactiveAudio.push(newLayer);\n\t\t\t\tthis.repeatTimer = -9999;\n\t\t\t}\n\t\t}\n\t}\n\n\tstartFade() {\n\t\tthis.fadeOut = true;\n\t\tthis.fadeTimer = this.fadeTimer || 0;\n\t}\n\n\tdestroy() {\n\t\tthis.isDone = true;\n\t\tthis._layer.stop();\n\t\tthisScene.destroyLayer(this._layer);\n\t}\n}\nSoundLayer.fadeTime = 1.0;\n\n\n\n\n/**\n * @param {Boolean} value (for property 'visible')\n */\nexport function update(value) {\n\trepeatTimer += engine.frametime;\n\n\t// Update existing audio\n\tactiveAudio.forEach(\n\t\tfunction(soundLayer, index, array) {\n\t\t\tsoundLayer.update();\n\t\t\tif (soundLayer.isDone) {\n\t\t\t\tarray.splice(index, 1);\n\t\t\t}\n\t\t}\n\t);\n\n\treturn value;\n}\n\n\n\n\n/**\n * @param {Object} userProperties\n */\nexport function applyUserProperties(userProperties) {\n\tif (userProperties.music != undefined && userProperties.music != music) {\n\t\tmusic = userProperties.music;\n\n\t\tstartMusic();\n\t}\n}\n\n\n\n\n// Start fading out all active audio\nfunction fadeAll() {\n\tfor (let i = 0; i < activeAudio.length; ++i) {\n\t\tactiveAudio[i].startFade();\n\t}\n}\n\n\n\n\n// Start new music\nfunction startMusic() {\n\t// Fade out any active music\n\tfadeAll();\n\n\tlet newMusic = undefined;\n\n\tswitch (music) {\n\tcase \"Old\":\n\t\tnewMusic = new SoundLayer(a_TitleMusicOld);\n\t\tnewMusic.repeatDelay = musicRepeatDelayOld;\n\t\tactiveAudio.push(newMusic);\n\t\tbreak;\n\tcase \"New\":\n\t\tnewMusic = new SoundLayer(a_TitleMusic);\n\t\tnewMusic.repeatDelay = musicRepeatDelay;\n\t\tactiveAudio.push(newMusic);\n\t\tnewMusic = new SoundLayer(a_TitleAmbient)\n\t\tnewMusic.repeatDelay = musicRepeatDelay;\n\t\tactiveAudio.push(newMusic);\n\t\tbreak;\n\tcase \"Ambient\":\n\t\tnewMusic = new SoundLayer(a_TitleAmbient);\n\t\tnewMusic.repeatDelay = musicRepeatDelay;\n\t\tactiveAudio.push(newMusic);\n\t\tbreak;\n\tcase \"None\":\n\tdefault:\n\t\tbreak;\n\t}\n}",
				"value" : false
			}
		},
		{
			"angles" : "0.000 0.000 0.000",
			"colorBlendMode" : 0,
			"copybackground" : true,
			"id" : 44,
			"image" : "models/sky.json",
			"ledsource" : false,
			"locktransforms" : false,
			"name" : "sky",
			"origin" : "1920.000 1336.561 0.000",
			"parallaxDepth" : "1.000 1.000",
			"perspective" : false,
			"scale" : "6.760 6.760 6.760",
			"size" : "568.000 395.000",
			"solid" : true,
			"visible" : true
		},
		{
			"angles" : "0.000 0.000 0.000",
			"colorBlendMode" : 9,
			"copybackground" : true,
			"effects" : 
			[
				{
					"file" : "effects/transform/effect.json",
					"id" : 48,
					"name" : "",
					"passes" : 
					[
						{
							"combos" : 
							{
								"MODE" : 1
							},
							"id" : 49
						}
					],
					"visible" : true
				}
			],
			"id" : 36,
			"image" : "models/planet.json",
			"ledsource" : false,
			"locktransforms" : false,
			"name" : "planet",
			"origin" : "610.929 1689.830 0.000",
			"parallaxDepth" : "1.000 1.000",
			"perspective" : false,
			"scale" : "6.760 6.760 6.760",
			"size" : "180.000 315.000",
			"solid" : true,
			"visible" : true
		},
		{
			"angles" : "0.000 0.000 0.000",
			"colorBlendMode" : 0,
			"copybackground" : true,
			"id" : 18,
			"image" : "models/clouds-2.json",
			"ledsource" : false,
			"locktransforms" : false,
			"name" : "clouds-2",
			"origin" : "1920.000 1080.000 0.000",
			"parallaxDepth" : "1.000 1.000",
			"perspective" : false,
			"scale" : "6.761 6.761 6.761",
			"size" : "568.000 277.000",
			"solid" : true,
			"visible" : true
		},
		{
			"angles" : "0.000 0.000 0.000",
			"colorBlendMode" : 0,
			"copybackground" : true,
			"id" : 12,
			"image" : "models/clouds-1.json",
			"ledsource" : false,
			"locktransforms" : false,
			"name" : "clouds-1",
			"origin" : "2073.937 750.136 0.000",
			"parallaxDepth" : "1.000 1.000",
			"perspective" : false,
			"scale" : "6.760 6.760 6.760",
			"size" : "524.000 130.000",
			"solid" : true,
			"visible" : true
		},
		{
			"angles" : "0.000 0.000 0.000",
			"colorBlendMode" : 0,
			"copybackground" : true,
			"id" : 22,
			"image" : "models/ground.json",
			"ledsource" : false,
			"locktransforms" : false,
			"name" : "ground",
			"origin" : "1920.000 547.330 0.000",
			"parallaxDepth" : "1.000 1.000",
			"perspective" : false,
			"scale" : "6.761 6.761 6.761",
			"size" : "568.000 162.000",
			"solid" : true,
			"visible" : true
		},
		{
			"angles" : "0.000 0.000 0.000",
			"colorBlendMode" : 0,
			"copybackground" : true,
			"id" : 40,
			"image" : "models/railings.json",
			"ledsource" : false,
			"locktransforms" : false,
			"name" : "railings",
			"origin" : "1920.000 212.802 0.000",
			"parallaxDepth" : "1.000 1.000",
			"perspective" : false,
			"scale" : "6.761 6.761 6.761",
			"size" : "568.000 63.000",
			"solid" : true,
			"visible" : true
		},
		{
			"angles" : "0.000 0.000 0.000",
			"colorBlendMode" : 0,
			"copybackground" : true,
			"id" : 26,
			"image" : "models/lea.json",
			"ledsource" : false,
			"locktransforms" : false,
			"name" : "lea",
			"origin" : "3216.099 826.690 0.000",
			"parallaxDepth" : "1.000 1.000",
			"perspective" : false,
			"scale" : "6.761 6.761 6.761",
			"size" : "184.000 245.000",
			"solid" : true,
			"visible" : true
		},
		{
			"colorBlendMode" : 0,
			"copybackground" : true,
			"effects" : 
			[
				{
					"file" : "effects/pixelate/effect.json",
					"id" : 54,
					"name" : "",
					"passes" : 
					[
						{
							"combos" : 
							{
								"POINTFILTER" : 1
							},
							"constantshadervalues" : 
							{
								"Resolution Scale" : 0.5
							},
							"id" : 55
						}
					],
					"visible" : false
				},
				{
					"file" : "effects/downsample4x/effect.json",
					"id" : 74,
					"name" : "",
					"passes" : 
					[
						{
							"combos" : 
							{
								"FILTER" : 1
							},
							"id" : 75
						},
						{
							"combos" : 
							{
								"FILTER" : 1,
								"TRANSFORM" : 1
							},
							"id" : 76
						}
					],
					"visible" : false
				}
			],
			"id" : 51,
			"image" : "models/util/fullscreenlayer.json",
			"ledsource" : false,
			"locktransforms" : false,
			"name" : "Post FX",
			"parallaxDepth" : "1.000 1.000",
			"perspective" : false,
			"solid" : true,
			"visible" : true
		},
		{
			"alpha" : 1.0,
			"anchor" : "none",
			"angles" : "0.000 0.000 0.000",
			"backgroundcolor" : "0.000 0.000 0.000",
			"color" : "1.000 1.000 1.000",
			"colorBlendMode" : 0,
			"copybackground" : true,
			"font" : "systemfont_arial",
			"horizontalalign" : "center",
			"id" : 104,
			"ledsource" : false,
			"locktransforms" : false,
			"name" : "DEBUG: Is Music playing?",
			"opaquebackground" : false,
			"origin" : "1101.735 1542.857 0.000",
			"padding" : 32,
			"parallaxDepth" : "1.000 1.000",
			"perspective" : false,
			"pointsize" : 32.0,
			"scale" : "1.000 1.000 1.000",
			"size" : "1017.000 153.000",
			"solid" : true,
			"text" : 
			{
				"script" : "'use strict';\n\n/**\n * @param {String} value (for property 'text')\n */\nexport function update(value) {\n\tvalue = \"Is Music playing? No.\";\n\tthisScene.enumerateLayers().forEach( function(layer, index, array) {\n\t\tif (layer.isPlaying && layer.isPlaying()){\n\t\t\tvalue = \"Is Music playing? Yes!\";\n\t\t}\n\t});\n\t\n\treturn value;\n}\n",
				"value" : "Is Music playing?"
			},
			"verticalalign" : "center",
			"visible" : false
		}
	]
}